{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jason/Nocodile/frontend/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,qLAAO,EAAC,IAAA,4JAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jason/Nocodile/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,sLAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,uLAAI,GAAG;IAE9B,qBACE,yMAAC;QACC,aAAU;QACV,WAAW,IAAA,iIAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jason/Nocodile/frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-xs transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,sBAAQ,uLAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,yMAAC;QACC,MAAM;QACN,WAAW,IAAA,iIAAE,EACX,8VACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jason/Nocodile/frontend/app/project/%5Bid%5D/annotate/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ApiService } from \"@/lib/api\";\r\nimport { log } from \"@/lib/logger\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Square,\r\n  MousePointer,\r\n  Trash2,\r\n  Save,\r\n} from \"lucide-react\";\r\n\r\ninterface Annotation {\r\n  id: string;\r\n  class: string;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  color: string;\r\n}\r\n\r\ninterface Class {\r\n  id: string;\r\n  name: string;\r\n  color: string;\r\n}\r\n\r\nfunction AnnotatePageContent() {\r\n  const { id } = useParams();\r\n  const [currentFrameImage, setCurrentFrameImage] = useState<string>(\"\");\r\n  const [currentFrame, setCurrentFrame] = useState(0);\r\n  const [currentImage, setCurrentImage] = useState(1);\r\n  const [totalImages, setTotalImages] = useState(150); // ÂãïÊÖãÁ∏ΩÂπÄÊï∏\r\n  const [currentVideo, setCurrentVideo] = useState(1);\r\n  const [totalVideos] = useState(10);\r\n  const [selectedTool, setSelectedTool] = useState<\"select\" | \"box\">(\"box\");\r\n  const [selectedClass, setSelectedClass] = useState(\"stop_sign\");\r\n  const [annotations, setAnnotations] = useState<Annotation[]>([]);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [drawStart, setDrawStart] = useState({ x: 0, y: 0 });\r\n  const [currentBox, setCurrentBox] = useState<{\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n  } | null>(null);\r\n  const [zoom, setZoom] = useState(100);\r\n  const [imageScale, setImageScale] = useState(1);\r\n  const [classes, setClasses] = useState<Class[]>([\r\n    { id: \"give_way_sign\", name: \"give_way_sign\", color: \"#fbbf24\" },\r\n    { id: \"pedestrian_child\", name: \"pedestrian_child\", color: \"#3b82f6\" },\r\n    { id: \"zebra_crossing_sign\", name: \"zebra_crossing_sign\", color: \"#8b5cf6\" },\r\n    { id: \"traffic_light_red\", name: \"traffic_light_red\", color: \"#10b981\" },\r\n    { id: \"stop_sign\", name: \"stop_sign\", color: \"#ef4444\" },\r\n  ]);\r\n  const [newClassName, setNewClassName] = useState(\"\");\r\n  const [classPage, setClassPage] = useState(1);\r\n  const CLASSES_PER_PAGE = 5;\r\n  const [currentVideoId, setCurrentVideoId] = useState(\"\");\r\n  const [annotationStatus, setAnnotationStatus] = useState(\"not yet started\");\r\n  const [lastAnnotatedFrame, setLastAnnotatedFrame] = useState(0);\r\n  const [isAutoSaving, setIsAutoSaving] = useState(false);\r\n  const [lastSavedTime, setLastSavedTime] = useState<string | null>(null);\r\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved' | 'error'>('idle');\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const projectId = Array.isArray(id) ? id[0] : id;\r\n  const safeProjectId = projectId || \"\";\r\n\r\n  const getClientTimestamp = () => {\r\n    if (typeof window === 'undefined') {\r\n      return \"2024-01-01T00:00:00.000Z\";\r\n    }\r\n    return new Date().toISOString();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const videoId = urlParams.get('video_id');\r\n    if (videoId) {\r\n      // Áõ¥Êé•‰ΩøÁî®ÂÇ≥ÂÖ•ÁöÑË¶ñÈ†ª IDÔºàÊáâË©≤ÊòØË≥áÊñôÂ∫´‰∏≠ÁöÑÂîØ‰∏Ä IDÔºâ\r\n      setCurrentVideoId(videoId);\r\n      console.log('üÜî [ANNOTATE] Video ID from params:', videoId);\r\n    } else {\r\n      console.warn('‚ö†Ô∏è [ANNOTATE] No video_id parameter found, getting first available video');\r\n      getFirstAvailableVideoId();\r\n    }\r\n  }, [projectId]);\r\n\r\n  const getFirstAvailableVideoId = async () => {\r\n    try {\r\n      if (safeProjectId) {\r\n        const videos = await ApiService.getUploadedVideos(safeProjectId);\r\n        if (videos && videos.length > 0) {\r\n          const firstVideo = videos[0];\r\n          // ÂæåÁ´ØËøîÂõûÁöÑÊï∏ÊìöÁµêÊßãÔºö{name, file, path, url}ÔºåÂÖ∂‰∏≠ file ÊòØ video_id\r\n          const videoId = firstVideo.file_id || firstVideo.video_id || firstVideo.id;\r\n          if (videoId && videoId !== \"undefined\" && videoId !== \"\" && videoId !== undefined) { \r\n            setCurrentVideoId(videoId.toString());\r\n            console.log('üÜî [ANNOTATE] Using first available video ID:', videoId);\r\n          } else {\r\n            console.warn('‚ö†Ô∏è [ANNOTATE] No valid video ID found in video data:', firstVideo);\r\n            const defaultVideoId = `1`;\r\n            setCurrentVideoId(defaultVideoId);\r\n            console.log('üÜî [ANNOTATE] Using fallback video ID:', defaultVideoId);\r\n          }\r\n        } else {\r\n          const defaultVideoId = `1`; // ‰ΩøÁî®Êï∏Â≠ó ID ËÄå‰∏çÊòØÂ≠óÁ¨¶‰∏≤\r\n          setCurrentVideoId(defaultVideoId);\r\n          console.log('üÜî [ANNOTATE] No videos found, using default video ID:', defaultVideoId);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting first available video ID:', error);\r\n      const defaultVideoId = `1`; // ‰ΩøÁî®Êï∏Â≠ó ID ËÄå‰∏çÊòØÂ≠óÁ¨¶‰∏≤\r\n      setCurrentVideoId(defaultVideoId);\r\n      console.log('üÜî [ANNOTATE] Error occurred, using default video ID:', defaultVideoId);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadClasses = async () => {\r\n      try {\r\n        if (safeProjectId) {\r\n          const classesData = await ApiService.getClasses(safeProjectId);\r\n          // Á¢∫‰øù classesData ÊòØ‰∏ÄÂÄãÊï∏ÁµÑ\r\n          if (Array.isArray(classesData)) {\r\n            setClasses(classesData);\r\n            log.info('ANNOTATE', 'Classes loaded successfully', { projectId: safeProjectId, classCount: classesData.length });\r\n          } else {\r\n            console.warn('Classes data is not an array:', classesData);\r\n            setClasses([\r\n              { id: \"give_way_sign\", name: \"give_way_sign\", color: \"#fbbf24\" },\r\n              { id: \"pedestrian_child\", name: \"pedestrian_child\", color: \"#3b82f6\" },\r\n              { id: \"zebra_crossing_sign\", name: \"zebra_crossing_sign\", color: \"#8b5cf6\" },\r\n              { id: \"traffic_light_red\", name: \"traffic_light_red\", color: \"#10b981\" },\r\n              { id: \"stop_sign\", name: \"stop_sign\", color: \"#ef4444\" },\r\n            ]);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading classes:', error);\r\n        setClasses([\r\n          { id: \"give_way_sign\", name: \"give_way_sign\", color: \"#fbbf24\" },\r\n          { id: \"pedestrian_child\", name: \"pedestrian_child\", color: \"#3b82f6\" },\r\n          { id: \"zebra_crossing_sign\", name: \"zebra_crossing_sign\", color: \"#8b5cf6\" },\r\n          { id: \"traffic_light_red\", name: \"traffic_light_red\", color: \"#10b981\" },\r\n          { id: \"stop_sign\", name: \"stop_sign\", color: \"#ef4444\" },\r\n        ]);\r\n      }\r\n    };\r\n    loadClasses();\r\n  }, [safeProjectId]);\r\n\r\n  useEffect(() => {\r\n    if (safeProjectId && currentVideoId) {\r\n      const timer = setTimeout(async () => {\r\n        await checkAnnotationStatus();\r\n        await loadCurrentFrame();\r\n      }, 100);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [safeProjectId, currentVideoId]);\r\n\r\n  const checkAnnotationStatus = async () => {\r\n    try {\r\n      if (safeProjectId && currentVideoId) {\r\n        const statusData = await ApiService.checkAnnotationStatus(safeProjectId, currentVideoId);\r\n        if (statusData && typeof statusData === 'object') {\r\n          setAnnotationStatus(statusData[\"annotation status\"] || \"not yet started\");\r\n          setLastAnnotatedFrame(statusData[\"last annotated frame\"] || 0);\r\n          console.log('Annotation status:', statusData);\r\n        } else {\r\n          setAnnotationStatus(\"not yet started\");\r\n          setLastAnnotatedFrame(0);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking annotation status:', error);\r\n      setAnnotationStatus(\"not yet started\");\r\n      setLastAnnotatedFrame(0);\r\n    }\r\n  };\r\n\r\n  const getNextFrameToAnnotate = async () => {\r\n    try {\r\n      if (!safeProjectId || !currentVideoId || currentVideoId === \"\" || currentVideoId === \"undefined\") {\r\n        console.warn('Invalid projectId or videoId', { projectId: safeProjectId, videoId: currentVideoId });\r\n        return;\r\n      }\r\n      \r\n      const frameData = await ApiService.getNextFrameToAnnotate(safeProjectId, currentVideoId, currentFrame);\r\n      console.log('üîç [FRONTEND] Frame data received:', frameData);\r\n      \r\n      if (frameData && frameData.success) {\r\n        if (frameData.image) {\r\n          // Validate and format the image data properly\r\n          let imageData = frameData.image;\r\n          \r\n          // Check if it's already a data URL\r\n          if (!imageData.startsWith('data:')) {\r\n            // If it's raw base64, add the proper data URL prefix\r\n            if (imageData.startsWith('9j/') || imageData.startsWith('iVBORw0KGgo')) {\r\n              // This looks like base64 data without proper data URL format\r\n              console.warn('‚ö†Ô∏è [FRONTEND] Received malformed base64 data, attempting to fix');\r\n              imageData = `data:image/jpeg;base64,${imageData}`;\r\n            } else {\r\n              // Assume it's base64 and add JPEG data URL prefix\r\n              imageData = `data:image/jpeg;base64,${imageData}`;\r\n            }\r\n          }\r\n          \r\n          // Validate the data URL format\r\n          if (!imageData.startsWith('data:image/')) {\r\n            console.error('‚ùå [FRONTEND] Invalid image data format:', imageData.substring(0, 100) + '...');\r\n            setCurrentFrameImage(\"\");\r\n            return;\r\n          }\r\n          \r\n          setCurrentFrameImage(imageData);\r\n          setTotalImages(frameData.total_frames || 150); // ÂãïÊÖãÊõ¥Êñ∞Á∏ΩÂπÄÊï∏\r\n          \r\n          // ÂÑ™ÂÖà‰ΩøÁî® frame_idÔºåÂ¶ÇÊûúÊ≤íÊúâÂâá‰ΩøÁî® frame_numÔºåÊúÄÂæåÊâçÊâãÂãïÈÅûÂ¢û\r\n          if (frameData.frame_id !== undefined) {\r\n            setCurrentFrame(frameData.frame_id);\r\n            setCurrentImage(frameData.frame_id + 1);\r\n            console.log(`‚úÖ [FRONTEND] Key frame loaded: frame ${frameData.frame_id} (total: ${frameData.total_frames})`);\r\n          } else if (frameData.frame_num !== undefined) {\r\n            setCurrentFrame(frameData.frame_num);\r\n            setCurrentImage(frameData.frame_num + 1);\r\n            console.log(`‚úÖ [FRONTEND] Key frame loaded using frame_num: frame ${frameData.frame_num} (total: ${frameData.total_frames})`);\r\n          } else {\r\n            console.warn('‚ö†Ô∏è [FRONTEND] No frame ID provided, using manual increment');\r\n            setCurrentFrame((prev) => prev + 1);\r\n            setCurrentImage((prev) => prev + 1);\r\n          }\r\n        } else {\r\n          console.log('‚ùå [FRONTEND] No image returned, possible end of video');\r\n          setCurrentFrameImage(\"\");\r\n          setAnnotationStatus(\"completed\");\r\n        }\r\n      } else {\r\n        console.log('‚ùå [FRONTEND] API returned success=false:', frameData?.message);\r\n        setCurrentFrameImage(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting next frame:', error);\r\n      \r\n      // Ê™¢Êü•ÊòØÂê¶ÁÇ∫431ÈåØË™§ÊàñÂÖ∂‰ªñÁ∂≤Ë∑ØÈåØË™§\r\n      if (error instanceof Error && error.message && error.message.includes('431')) {\r\n        console.warn('‚ö†Ô∏è [FRONTEND] 431 Request Header Fields Too Large - using fallback mechanism');\r\n        // Ê∏ÖÈô§ÂèØËÉΩÈÅéÂ§ßÁöÑÊú¨Âú∞Â≠òÂÑ≤\r\n        try {\r\n          localStorage.removeItem('large_session_data');\r\n          sessionStorage.clear();\r\n        } catch (storageError) {\r\n          console.warn('Could not clear storage:', storageError);\r\n        }\r\n      }\r\n      \r\n      // ‰ΩøÁî®fallbackÊ©üÂà∂ - ÊâãÂãïÈÅûÂ¢ûÂπÄÊï∏\r\n      console.log('üîÑ [FRONTEND] Using fallback: manual frame increment');\r\n      setCurrentFrame((prev) => prev + 1);\r\n      setCurrentImage((prev) => prev + 1);\r\n      setCurrentFrameImage(\"\"); // Ê∏ÖÁ©∫ÂúñÁâáÔºåËÆìÁî®Êà∂Áü•ÈÅìÈúÄË¶ÅÈáçÊñ∞ËºâÂÖ•\r\n    }\r\n  };\r\n\r\n  const loadCurrentFrame = async () => {\r\n    await getNextFrameToAnnotate();\r\n  };\r\n\r\n  // Ê∑ªÂä†ÈáçË©¶Ê©üÂà∂\r\n  const retryGetNextFrame = async (retryCount = 0, maxRetries = 3) => {\r\n    try {\r\n      await getNextFrameToAnnotate();\r\n    } catch (error) {\r\n      if (retryCount < maxRetries) {\r\n        console.log(`üîÑ [FRONTEND] Retrying frame request (${retryCount + 1}/${maxRetries})`);\r\n        setTimeout(() => {\r\n          retryGetNextFrame(retryCount + 1, maxRetries);\r\n        }, 1000 * (retryCount + 1)); // ÈÅûÂ¢ûÂª∂ÈÅ≤\r\n      } else {\r\n        console.error('‚ùå [FRONTEND] Max retries reached, using fallback');\r\n        // ÊúÄÁµÇfallbackÔºöÊâãÂãïÈÅûÂ¢ûÂπÄÊï∏\r\n        setCurrentFrame((prev) => prev + 1);\r\n        setCurrentImage((prev) => prev + 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getNextVideo = async () => {\r\n    try {\r\n      if (safeProjectId && currentVideo < totalVideos) {\r\n        const videoData = await ApiService.getNextVideo(safeProjectId, currentVideoId);\r\n        if (videoData && videoData.success && videoData.next_video_id) {\r\n          setCurrentVideoId(videoData.next_video_id);\r\n          setCurrentVideo((prev) => prev + 1);\r\n          setCurrentImage(1);\r\n          setCurrentFrame(0);\r\n          setAnnotations([]);\r\n          setCurrentFrameImage(\"\");\r\n          setTimeout(async () => {\r\n            await checkAnnotationStatus();\r\n            await loadCurrentFrame();\r\n          }, 100);\r\n          console.log('Next video loaded:', videoData);\r\n        } else {\r\n          console.log('No next video available');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting next video:', error);\r\n    }\r\n  };\r\n\r\n  const redrawAnnotations = useCallback(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    annotations.forEach((annotation) => {\r\n      const classInfo = classes.find((c) => c.id === annotation.class);\r\n      if (!classInfo) return;\r\n      ctx.strokeStyle = classInfo.color;\r\n      ctx.fillStyle = classInfo.color + \"20\";\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeRect(annotation.x, annotation.y, annotation.width, annotation.height);\r\n      ctx.fillRect(annotation.x, annotation.y, annotation.width, annotation.height);\r\n    });\r\n    if (currentBox) {\r\n      const currentClass = classes.find((c) => c.id === selectedClass) || classes[0] || {\r\n        id: \"default\",\r\n        name: \"default\",\r\n        color: \"#3b82f6\"\r\n      };\r\n      ctx.strokeStyle = currentClass.color;\r\n      ctx.fillStyle = currentClass.color + \"20\";\r\n      ctx.lineWidth = 3;\r\n      ctx.setLineDash([8, 4]);\r\n      ctx.strokeRect(currentBox.x, currentBox.y, currentBox.width, currentBox.height);\r\n      ctx.fillRect(currentBox.x, currentBox.y, currentBox.width, currentBox.height);\r\n      if (currentBox.width > 50 && currentBox.height > 20) {\r\n        ctx.fillStyle = currentClass.color;\r\n        ctx.font = \"bold 12px Arial\";\r\n        ctx.fillText(currentClass.name, currentBox.x + 5, currentBox.y + 15);\r\n      }\r\n      ctx.setLineDash([]);\r\n    }\r\n  }, [annotations, currentBox, selectedClass, classes]);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n    const updateCanvasSize = () => {\r\n      if (containerRef.current) {\r\n        const rect = containerRef.current.getBoundingClientRect();\r\n        canvas.width = rect.width;\r\n        canvas.height = rect.height;\r\n        canvas.style.width = `${rect.width}px`;\r\n        canvas.style.height = `${rect.height}px`;\r\n        redrawAnnotations();\r\n      }\r\n    };\r\n    updateCanvasSize();\r\n    window.addEventListener(\"resize\", updateCanvasSize);\r\n    return () => window.removeEventListener(\"resize\", updateCanvasSize);\r\n  }, [redrawAnnotations]);\r\n\r\n  useEffect(() => {\r\n    redrawAnnotations();\r\n  }, [redrawAnnotations, currentFrameImage]);\r\n\r\n  useEffect(() => {\r\n    const totalPages = Math.max(1, Math.ceil(classes.length / CLASSES_PER_PAGE));\r\n    if (classPage > totalPages) {\r\n      setClassPage(totalPages);\r\n    }\r\n  }, [classes, classPage]);\r\n\r\n  if (!currentVideoId) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">No Video Selected</h2>\r\n          <p className=\"text-gray-600 mb-4\">Please select a video to annotate from the upload page.</p>\r\n          <div className=\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4\">\r\n            <p className=\"text-sm\">\r\n              <strong>Debug Info:</strong><br/>\r\n              Project ID: {safeProjectId}<br/>\r\n              Current Video ID: {currentVideoId}<br/>\r\n              URL: {typeof window !== 'undefined' ? window.location.href : 'N/A'}\r\n            </p>\r\n          </div>\r\n          <div className=\"space-x-4\">\r\n            <Link href={`/project/${safeProjectId}/upload`} className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\">\r\n              Go to Upload Page\r\n            </Link>\r\n            <button onClick={() => window.location.reload()} className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\">\r\n              Reload Page\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentClass = classes.find((c) => c.id === selectedClass) || classes[0] || {\r\n    id: \"default\",\r\n    name: \"default\",\r\n    color: \"#3b82f6\"\r\n  };\r\n\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (selectedTool !== \"box\") return;\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const rect = canvas.getBoundingClientRect();\r\n    const x = (e.clientX - rect.left) / imageScale;\r\n    const y = (e.clientY - rect.top) / imageScale;\r\n    setIsDrawing(true);\r\n    setDrawStart({ x, y });\r\n    setCurrentBox({ x, y, width: 0, height: 0 });\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDrawing || selectedTool !== \"box\") return;\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const rect = canvas.getBoundingClientRect();\r\n    const x = (e.clientX - rect.left) / imageScale;\r\n    const y = (e.clientY - rect.top) / imageScale;\r\n    const width = x - drawStart.x;\r\n    const height = y - drawStart.y;\r\n    setCurrentBox({\r\n      x: Math.min(drawStart.x, x),\r\n      y: Math.min(drawStart.y, y),\r\n      width: Math.abs(width),\r\n      height: Math.abs(height),\r\n    });\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleMouseUp = (e: React.MouseEvent) => {\r\n    if (!isDrawing || !currentBox || selectedTool !== \"box\") return;\r\n    if (currentBox.width > 10 && currentBox.height > 10) {\r\n      const newAnnotation: Annotation = {\r\n        id: `annotation_${annotations.length + 1}_${getClientTimestamp().replace(/[^0-9]/g, '')}`,\r\n        class: selectedClass,\r\n        x: currentBox.x,\r\n        y: currentBox.y,\r\n        width: currentBox.width,\r\n        height: currentBox.height,\r\n        color: currentClass.color,\r\n      };\r\n      setAnnotations((prev) => [...prev, newAnnotation]);\r\n    }\r\n    setIsDrawing(false);\r\n    setCurrentBox(null);\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleZoom = (newZoom: number) => {\r\n    setZoom(newZoom);\r\n    setImageScale(newZoom / 100);\r\n  };\r\n\r\n  const handleNextImage = async () => {\r\n    if (currentFrame < totalImages - 1) { // ‰ΩøÁî® currentFrame Âíå totalImages\r\n      await handleAutoSave();\r\n      setAnnotations([]);\r\n      await getNextFrameToAnnotate();\r\n      setCurrentImage((prev) => prev + 1);\r\n      console.log(`üîÑ [FRONTEND] Key frame updated: ${currentFrame + 1}/${totalImages}`);\r\n    } else {\r\n      console.log('Already at the last frame, switching to next video');\r\n      await getNextVideo();\r\n    }\r\n  };\r\n\r\n  const handlePrevImage = () => {\r\n    console.log('Previous frame navigation is disabled');\r\n  };\r\n\r\n  const handleAutoSave = async () => {\r\n    if (annotations.length === 0) {\r\n      console.log('No annotations to save, skipping auto-save');\r\n      return;\r\n    }\r\n    setIsAutoSaving(true);\r\n    setSaveStatus('saving');\r\n    try {\r\n      const annotationData = {\r\n        project_id: safeProjectId,\r\n        video_id: currentVideoId,\r\n        frame_num: currentFrame,\r\n        bboxes: annotations.map(ann => ({\r\n          class_name: ann.class,\r\n          x: Number(ann.x),\r\n          y: Number(ann.y),\r\n          width: Number(ann.width),\r\n          height: Number(ann.height)\r\n        }))\r\n      };\r\n      const result = await ApiService.saveAnnotation(annotationData);\r\n      if (result.success) {\r\n        setLastSavedTime(result.savedAt || getClientTimestamp());\r\n        setSaveStatus('saved');\r\n        console.log('Annotations auto-saved successfully', { savedAt: result.savedAt, bboxCount: annotations.length });\r\n      } else {\r\n        setSaveStatus('error');\r\n        saveToLocalStorage(annotationData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error auto-saving annotations:', error);\r\n      setSaveStatus('error');\r\n      const annotationData = {\r\n        project_id: safeProjectId,\r\n        video_id: currentVideoId,\r\n        frame_num: currentFrame,\r\n        bboxes: annotations.map(ann => ({\r\n          class_name: ann.class,\r\n          x: Number(ann.x),\r\n          y: Number(ann.y),\r\n          width: Number(ann.width),\r\n          height: Number(ann.height)\r\n        }))\r\n      };\r\n      saveToLocalStorage(annotationData);\r\n    } finally {\r\n      setIsAutoSaving(false);\r\n      setTimeout(() => setSaveStatus('idle'), 3000);\r\n    }\r\n  };\r\n\r\n  const saveToLocalStorage = (annotationData: any) => {\r\n    try {\r\n      const key = `annotation_backup_${annotationData.project_id}_${annotationData.video_id}_${annotationData.frame_num}`;\r\n      localStorage.setItem(key, JSON.stringify({\r\n        ...annotationData,\r\n        savedAt: getClientTimestamp(),\r\n        isBackup: true\r\n      }));\r\n      console.log('Annotation saved to local storage as backup');\r\n    } catch (error) {\r\n      console.error('Failed to save to local storage:', error);\r\n    }\r\n  };\r\n\r\n  const handleManualSave = async () => {\r\n    if (!safeProjectId || !currentVideoId) {\r\n      console.warn('Cannot save annotations: missing projectId or videoId');\r\n      alert('Cannot save: Missing project or video information');\r\n      return;\r\n    }\r\n    try {\r\n      const annotationData = {\r\n        project_id: safeProjectId,\r\n        video_id: currentVideoId,\r\n        frame_num: currentFrame,\r\n        bboxes: annotations.map(ann => ({\r\n          class_name: ann.class,\r\n          x: Number(ann.x),\r\n          y: Number(ann.y),\r\n          width: Number(ann.width),\r\n          height: Number(ann.height)\r\n        }))\r\n      };\r\n      const result = await ApiService.saveAnnotation(annotationData);\r\n      if (result.success) {\r\n        console.log('Annotations saved successfully', { savedAt: result.savedAt, bboxCount: annotations.length });\r\n        alert(`Annotations saved successfully! (${annotations.length} bounding boxes)`);\r\n      } else {\r\n        saveToLocalStorage(annotationData);\r\n        alert(`Failed to save annotations: ${result.message || 'Unknown error'}. Data backed up locally.`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving annotations:', error);\r\n      const annotationData = {\r\n        project_id: safeProjectId,\r\n        video_id: currentVideoId,\r\n        frame_num: currentFrame,\r\n        bboxes: annotations.map(ann => ({\r\n          class_name: ann.class,\r\n          x: Number(ann.x),\r\n          y: Number(ann.y),\r\n          width: Number(ann.width),\r\n          height: Number(ann.height)\r\n        }))\r\n      };\r\n      saveToLocalStorage(annotationData);\r\n      alert(`Error saving annotations: ${error instanceof Error ? error.message : 'Unknown error'}. Data backed up locally.`);\r\n    }\r\n  };\r\n\r\n  const isValidHex = (color: string) => /^#([0-9a-fA-F]{3}){1,2}$/.test(color);\r\n\r\n  const generateUniqueColor = (used: Set<string>) => {\r\n    const palette = [\r\n      \"#ef4444\", \"#3b82f6\", \"#10b981\", \"#f59e0b\", \"#8b5cf6\",\r\n      \"#ec4899\", \"#14b8a6\", \"#f97316\", \"#84cc16\", \"#06b6d4\"\r\n    ];\r\n    for (const c of palette) {\r\n      if (!used.has(c.toLowerCase())) return c;\r\n    }\r\n    const hash = used.size;\r\n    const hue = (hash * 137.508) % 360;\r\n    return `hsl(${Math.floor(hue)}, 70%, 50%)`;\r\n  };\r\n\r\n  const handleAddClass = async () => {\r\n    const input = newClassName.trim();\r\n    if (!input) return;\r\n    const entries = input.split(\",\").map((s) => s.trim()).filter(Boolean);\r\n    for (const entry of entries) {\r\n      const [namePartRaw, colorPartRaw] = entry.split(\":\").map((s) => s.trim());\r\n      const namePart = namePartRaw || \"\";\r\n      if (!namePart) continue;\r\n      let chosenColor = \"#3b82f6\";\r\n      if (colorPartRaw && isValidHex(colorPartRaw)) {\r\n        chosenColor = colorPartRaw.toLowerCase();\r\n      }\r\n      const generatedId = namePart.toLowerCase().replace(/\\s+/g, \"_\");\r\n      if (classes.some((c) => c.id === generatedId)) {\r\n        console.log(`Class '${namePart}' already exists`);\r\n        continue;\r\n      }\r\n      try {\r\n        const result = await ApiService.addClass(safeProjectId, namePart, chosenColor);\r\n        if (result && result.success) {\r\n          const classesData = await ApiService.getClasses(safeProjectId);\r\n          setClasses(classesData);\r\n          setSelectedClass(generatedId);\r\n          console.log('‚úÖ [ANNOTATE] Class added via API');\r\n        } else {\r\n          alert(`Failed to add class: ${result?.message || 'Unknown error'}`);\r\n        }\r\n      } catch (error) {\r\n        alert(`Error adding class: ${error instanceof Error ? error.message : String(error)}`);\r\n      }\r\n    }\r\n    setNewClassName(\"\");\r\n  };\r\n\r\n  const handleDeleteClass = async (classId: string) => {\r\n    const classToDelete = classes.find(c => c.id === classId);\r\n    if (!classToDelete) return;\r\n    try {\r\n      const result = await ApiService.deleteClass(safeProjectId, classToDelete.name);\r\n      if (result && result.success) {\r\n        const classesData = await ApiService.getClasses(safeProjectId);\r\n        setClasses(classesData);\r\n        if (selectedClass === classId) {\r\n          const remaining = classesData.filter((c) => c.id !== classId);\r\n          setSelectedClass(remaining[0]?.id || \"\");\r\n        }\r\n        console.log('‚úÖ Class deleted successfully via API');\r\n      } else {\r\n        alert(`ÁÑ°Ê≥ïÂà™Èô§È°ûÂà•: ${result?.message || 'Unknown error'}`);\r\n      }\r\n    } catch (error) {\r\n      alert(`Âà™Èô§È°ûÂà•ÊôÇÁôºÁîüÈåØË™§: ${error instanceof Error ? error.message : String(error)}`);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAnnotation = async (annotationId: string) => {\r\n    try {\r\n      setAnnotations((prev) => prev.filter((ann) => ann.id !== annotationId));\r\n      await handleAutoSave();\r\n      console.log(`‚úÖ [FRONTEND] Annotation ${annotationId} deleted successfully`);\r\n    } catch (error) {\r\n      console.error('‚ùå [FRONTEND] Error deleting annotation:', error);\r\n    }\r\n  };\r\n\r\n  const isLastImage = currentFrame >= totalImages - 1;\r\n  const isLastVideo = currentVideo >= totalVideos;\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <div className=\"bg-white border-b border-gray-200 p-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-6\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"flex flex-col space-y-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handlePrevImage}\r\n                  disabled={true}\r\n                  className=\"flex items-center opacity-50 cursor-not-allowed\"\r\n                >\r\n                  <ChevronLeft className=\"w-4 h-4 mr-1\" />\r\n                  Prev image\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleNextImage}\r\n                  disabled={isLastImage || isAutoSaving}\r\n                  className=\"flex items-center\"\r\n                >\r\n                  {isAutoSaving ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-1\"></div>\r\n                      Saving...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      Next key frame\r\n                      <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </div>\r\n              <span className=\"font-semibold text-gray-700\">\r\n                Frame {currentImage} of {totalImages}\r\n              </span>\r\n              <div className=\"text-xs text-gray-500 ml-2\">\r\n                Debug: currentFrame={currentFrame}, videoId={currentVideoId}\r\n              </div>\r\n            </div>\r\n            <div className=\"w-px h-6 bg-gray-200\" />\r\n            <div className=\"flex items-center space-x-3\">\r\n              <span className=\"font-semibold text-gray-700\">\r\n                Video {currentVideo} of {totalVideos}\r\n              </span>\r\n              <div className=\"flex flex-col space-y-2\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    if (currentVideo > 1) {\r\n                      setCurrentVideo((prev) => prev - 1);\r\n                      setCurrentImage(1);\r\n                      setCurrentFrame(0);\r\n                      setAnnotations([]);\r\n                      setCurrentFrameImage(\"\");\r\n                      setTimeout(async () => {\r\n                        await checkAnnotationStatus();\r\n                        await loadCurrentFrame();\r\n                      }, 100);\r\n                    }\r\n                  }}\r\n                  disabled={currentVideo <= 1}\r\n                  className=\"flex items-center bg-blue-600 hover:bg-blue-700 text-white\"\r\n                >\r\n                  <ChevronLeft className=\"w-4 h-4 mr-1\" />\r\n                  Prev video\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={getNextVideo}\r\n                  disabled={isLastVideo}\r\n                  className=\"flex items-center bg-blue-600 hover:bg-blue-700 text-white\"\r\n                >\r\n                  Next video\r\n                  <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <Button\r\n              onClick={handleManualSave}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"text-gray-600 border-gray-300 hover:bg-gray-50\"\r\n              title=\"Emergency manual save (auto-save is enabled)\"\r\n            >\r\n              <Save className=\"w-4 h-4 mr-2\" />\r\n              Manual Save\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-1 flex flex-col\">\r\n          <div className=\"bg-gray-50 border-b border-gray-200 p-3 flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"font-semibold text-gray-700\">Tools</span>\r\n              <div className=\"flex items-center space-x-2 text-sm\">\r\n                <span className=\"text-gray-600\">ÁãÄÊÖã:</span>\r\n                <span className={`px-2 py-1 rounded text-xs ${\r\n                  annotationStatus === \"not yet started\" ? \"bg-gray-200 text-gray-700\" :\r\n                  annotationStatus === \"in progress\" ? \"bg-yellow-200 text-yellow-700\" :\r\n                  annotationStatus === \"completed\" ? \"bg-green-200 text-green-700\" :\r\n                  \"bg-blue-200 text-blue-700\"\r\n                }`}>\r\n                  {annotationStatus}\r\n                </span>\r\n                <span className=\"text-gray-600\">ÊúÄÂæåË®ªÈáãÂπÄ: {lastAnnotatedFrame}</span>\r\n                {saveStatus === 'saving' ? (\r\n                  <span className=\"text-blue-600 text-xs flex items-center\">\r\n                    <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1\"></div>\r\n                    Ëá™Âãï‰øùÂ≠ò‰∏≠...\r\n                  </span>\r\n                ) : saveStatus === 'saved' ? (\r\n                  <span className=\"text-green-600 text-xs flex items-center\">\r\n                    <div className=\"w-3 h-3 bg-green-500 rounded-full mr-1\"></div>\r\n                    Â∑≤‰øùÂ≠ò {lastSavedTime ? new Date(lastSavedTime).toLocaleTimeString() : ''}\r\n                  </span>\r\n                ) : saveStatus === 'error' ? (\r\n                  <span className=\"text-red-600 text-xs flex items-center\">\r\n                    <div className=\"w-3 h-3 bg-red-500 rounded-full mr-1\"></div>\r\n                    ‰øùÂ≠òÂ§±Êïó (Â∑≤ÂÇô‰ªΩÂà∞Êú¨Âú∞)\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"text-green-600 text-xs\">‚úì Ëá™Âãï‰øùÂ≠òÂ∑≤ÂïüÁî®</span>\r\n                )}\r\n              </div>\r\n              <div className=\"flex space-x-2\">\r\n                <Button\r\n                  variant={selectedTool === \"select\" ? \"default\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setSelectedTool(\"select\")}\r\n                  className=\"flex items-center\"\r\n                >\r\n                  <MousePointer className=\"w-4 h-4 mr-1\" />\r\n                  Select\r\n                </Button>\r\n                <Button\r\n                  variant={selectedTool === \"box\" ? \"default\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setSelectedTool(\"box\")}\r\n                  className=\"flex items-center\"\r\n                >\r\n                  <Square className=\"w-4 h-4 mr-1\" />\r\n                  Box\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm text-gray-600\">Zoom</span>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => handleZoom(Math.max(25, zoom - 25))}\r\n              >\r\n                <ZoomOut className=\"w-4 h-4\" />\r\n              </Button>\r\n              <span className=\"text-sm font-medium min-w-[3rem] text-center\">{zoom}%</span>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => handleZoom(Math.min(400, zoom + 25))}\r\n              >\r\n                <ZoomIn className=\"w-4 h-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <div ref={containerRef} className=\"flex-1 relative bg-white overflow-hidden flex items-center justify-center\">\r\n            {currentFrameImage ? (\r\n              <img\r\n                src={currentFrameImage}\r\n                alt={`Frame ${currentImage}`}\r\n                className=\"max-w-full max-h-full object-contain pointer-events-none\"\r\n                style={{ transform: `scale(${imageScale})` }}\r\n              />\r\n            ) : (\r\n              <div className=\"flex items-center justify-center h-64 bg-gray-100 rounded-lg\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\r\n                  <p className=\"text-gray-600\">Loading key frame...</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <canvas\r\n              ref={canvasRef}\r\n              className=\"absolute top-0 left-0 pointer-events-auto\"\r\n              style={{ transform: `scale(${imageScale})`, cursor: selectedTool === \"box\" ? \"crosshair\" : \"default\" }}\r\n              onMouseDown={handleMouseDown}\r\n              onMouseMove={handleMouseMove}\r\n              onMouseUp={handleMouseUp}\r\n              onContextMenu={(e) => e.preventDefault()}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"w-80 bg-white border-l border-gray-200 flex flex-col\">\r\n        <div className=\"p-4 border-b border-gray-200\">\r\n          <h3 className=\"font-semibold text-gray-800 mb-4\">Classes</h3>\r\n          <div className=\"flex items-center space-x-2 mb-3\">\r\n            <Input\r\n              placeholder=\"New class name\"\r\n              value={newClassName}\r\n              onChange={(e) => setNewClassName(e.target.value)}\r\n            />\r\n            <Button onClick={handleAddClass} className=\"bg-blue-600 hover:bg-blue-700 text-white\">\r\n              Add\r\n            </Button>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {(() => {\r\n              const totalPages = Math.max(1, Math.ceil(classes.length / CLASSES_PER_PAGE));\r\n              const startIdx = (classPage - 1) * CLASSES_PER_PAGE;\r\n              const pageItems = classes.slice(startIdx, startIdx + CLASSES_PER_PAGE);\r\n              return pageItems;\r\n            })().map((cls) => (\r\n              <div\r\n                key={cls.id}\r\n                className={`flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                  selectedClass === cls.id ? \"bg-gray-100 border border-gray-300\" : \"hover:bg-gray-50\"\r\n                }`}\r\n              >\r\n                <div onClick={() => setSelectedClass(cls.id)} className=\"flex items-center cursor-pointer\">\r\n                  <div className=\"w-3 h-3 rounded-full mr-3\" style={{ backgroundColor: cls.color }} />\r\n                  <span className={`text-sm ${selectedClass === cls.id ? \"font-semibold\" : \"\"}`}>\r\n                    {cls.name}\r\n                  </span>\r\n                </div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleDeleteClass(cls.id)}\r\n                  className=\"text-red-600 border-red-600 hover:bg-red-50\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                </Button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {classes.length > CLASSES_PER_PAGE && (\r\n            <div className=\"mt-3 flex items-center justify-between\">\r\n              <span className=\"text-xs text-gray-600\">\r\n                Page {classPage} of {Math.max(1, Math.ceil(classes.length / CLASSES_PER_PAGE))}\r\n              </span>\r\n              <div className=\"space-x-2\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={() => setClassPage((p) => Math.max(1, p - 1))}\r\n                  disabled={classPage <= 1}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n                >\r\n                  Prev\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={() => setClassPage((p) => Math.min(Math.max(1, Math.ceil(classes.length / CLASSES_PER_PAGE)), p + 1))}\r\n                  disabled={classPage >= Math.max(1, Math.ceil(classes.length / CLASSES_PER_PAGE))}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n                >\r\n                  Next\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"flex-1 p-4\">\r\n          <h3 className=\"font-semibold text-gray-800 mb-4\">Current Annotations</h3>\r\n          <div className=\"space-y-2\">\r\n            {annotations.map((annotation) => {\r\n              const classInfo = classes.find((c) => c.id === annotation.class);\r\n              return (\r\n                <div key={annotation.id} className=\"flex items-center justify-between p-2 bg-gray-50 rounded-lg\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"w-3 h-3 rounded-full mr-2\" style={{ backgroundColor: classInfo?.color }} />\r\n                    <span className=\"text-sm\">{annotation.class}</span>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleDeleteAnnotation(annotation.id)}\r\n                    className=\"text-red-600 border-red-600 hover:bg-red-50 p-1\"\r\n                  >\r\n                    <Trash2 className=\"w-3 h-3\" />\r\n                  </Button>\r\n                </div>\r\n              );\r\n            })}\r\n            {annotations.length === 0 && (\r\n              <p className=\"text-gray-500 text-sm text-center py-4\">\r\n                No annotations yet. Select the Box tool and draw on the image.\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst AnnotatePage = dynamic(() => Promise.resolve(AnnotatePageContent), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"flex items-center justify-center h-screen\">\r\n      <div className=\"text-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n        <p className=\"text-gray-600\">Loading annotation tool...</p>\r\n      </div>\r\n    </div>\r\n  )\r\n});\r\n\r\nexport default AnnotatePage;"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAVA;;;;;;;;;;AAqCA,SAAS;;IACP,MAAM,EAAE,EAAE,EAAE,GAAG,IAAA,8JAAS;IACxB,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,qLAAQ,EAAS;IACnE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qLAAQ,EAAC,MAAM,QAAQ;IAC7D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,GAAG,IAAA,qLAAQ,EAAC;IAC/B,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAmB;IACnE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qLAAQ,EAAC;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qLAAQ,EAAe,EAAE;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE;IACxD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qLAAQ,EAKlC;IACV,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qLAAQ,EAAC;IACjC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qLAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAU;QAC9C;YAAE,IAAI;YAAiB,MAAM;YAAiB,OAAO;QAAU;QAC/D;YAAE,IAAI;YAAoB,MAAM;YAAoB,OAAO;QAAU;QACrE;YAAE,IAAI;YAAuB,MAAM;YAAuB,OAAO;QAAU;QAC3E;YAAE,IAAI;YAAqB,MAAM;YAAqB,OAAO;QAAU;QACvE;YAAE,IAAI;YAAa,MAAM;YAAa,OAAO;QAAU;KACxD;IACD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC;IAC3C,MAAM,mBAAmB;IACzB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qLAAQ,EAAC;IACrD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,qLAAQ,EAAC;IACzD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,qLAAQ,EAAC;IAC7D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qLAAQ,EAAgB;IAClE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qLAAQ,EAAwC;IACpF,MAAM,YAAY,IAAA,mLAAM,EAAoB;IAC5C,MAAM,eAAe,IAAA,mLAAM,EAAiB;IAC5C,MAAM,YAAY,MAAM,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;IAC9C,MAAM,gBAAgB,aAAa;IAEnC,MAAM,qBAAqB;QACzB;;QAGA,OAAO,IAAI,OAAO,WAAW;IAC/B;IAEA,IAAA,sLAAS;yCAAC;YACR;;YACA,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;YAC5D,MAAM,UAAU,UAAU,GAAG,CAAC;YAC9B,IAAI,SAAS;gBACX,8BAA8B;gBAC9B,kBAAkB;gBAClB,QAAQ,GAAG,CAAC,uCAAuC;YACrD,OAAO;gBACL,QAAQ,IAAI,CAAC;gBACb;YACF;QACF;wCAAG;QAAC;KAAU;IAEd,MAAM,2BAA2B;QAC/B,IAAI;YACF,IAAI,eAAe;gBACjB,MAAM,SAAS,MAAM,uIAAU,CAAC,iBAAiB,CAAC;gBAClD,IAAI,UAAU,OAAO,MAAM,GAAG,GAAG;oBAC/B,MAAM,aAAa,MAAM,CAAC,EAAE;oBAC5B,uDAAuD;oBACvD,MAAM,UAAU,WAAW,OAAO,IAAI,WAAW,QAAQ,IAAI,WAAW,EAAE;oBAC1E,IAAI,WAAW,YAAY,eAAe,YAAY,MAAM,YAAY,WAAW;wBACjF,kBAAkB,QAAQ,QAAQ;wBAClC,QAAQ,GAAG,CAAC,iDAAiD;oBAC/D,OAAO;wBACL,QAAQ,IAAI,CAAC,wDAAwD;wBACrE,MAAM,iBAAiB,CAAC,CAAC,CAAC;wBAC1B,kBAAkB;wBAClB,QAAQ,GAAG,CAAC,0CAA0C;oBACxD;gBACF,OAAO;oBACL,MAAM,iBAAiB,CAAC,CAAC,CAAC,EAAE,iBAAiB;oBAC7C,kBAAkB;oBAClB,QAAQ,GAAG,CAAC,0DAA0D;gBACxE;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2CAA2C;YACzD,MAAM,iBAAiB,CAAC,CAAC,CAAC,EAAE,iBAAiB;YAC7C,kBAAkB;YAClB,QAAQ,GAAG,CAAC,yDAAyD;QACvE;IACF;IAEA,IAAA,sLAAS;yCAAC;YACR,MAAM;6DAAc;oBAClB,IAAI;wBACF,IAAI,eAAe;4BACjB,MAAM,cAAc,MAAM,uIAAU,CAAC,UAAU,CAAC;4BAChD,uBAAuB;4BACvB,IAAI,MAAM,OAAO,CAAC,cAAc;gCAC9B,WAAW;gCACX,mIAAG,CAAC,IAAI,CAAC,YAAY,+BAA+B;oCAAE,WAAW;oCAAe,YAAY,YAAY,MAAM;gCAAC;4BACjH,OAAO;gCACL,QAAQ,IAAI,CAAC,iCAAiC;gCAC9C,WAAW;oCACT;wCAAE,IAAI;wCAAiB,MAAM;wCAAiB,OAAO;oCAAU;oCAC/D;wCAAE,IAAI;wCAAoB,MAAM;wCAAoB,OAAO;oCAAU;oCACrE;wCAAE,IAAI;wCAAuB,MAAM;wCAAuB,OAAO;oCAAU;oCAC3E;wCAAE,IAAI;wCAAqB,MAAM;wCAAqB,OAAO;oCAAU;oCACvE;wCAAE,IAAI;wCAAa,MAAM;wCAAa,OAAO;oCAAU;iCACxD;4BACH;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,0BAA0B;wBACxC,WAAW;4BACT;gCAAE,IAAI;gCAAiB,MAAM;gCAAiB,OAAO;4BAAU;4BAC/D;gCAAE,IAAI;gCAAoB,MAAM;gCAAoB,OAAO;4BAAU;4BACrE;gCAAE,IAAI;gCAAuB,MAAM;gCAAuB,OAAO;4BAAU;4BAC3E;gCAAE,IAAI;gCAAqB,MAAM;gCAAqB,OAAO;4BAAU;4BACvE;gCAAE,IAAI;gCAAa,MAAM;gCAAa,OAAO;4BAAU;yBACxD;oBACH;gBACF;;YACA;QACF;wCAAG;QAAC;KAAc;IAElB,IAAA,sLAAS;yCAAC;YACR,IAAI,iBAAiB,gBAAgB;gBACnC,MAAM,QAAQ;2DAAW;wBACvB,MAAM;wBACN,MAAM;oBACR;0DAAG;gBACH;qDAAO,IAAM,aAAa;;YAC5B;QACF;wCAAG;QAAC;QAAe;KAAe;IAElC,MAAM,wBAAwB;QAC5B,IAAI;YACF,IAAI,iBAAiB,gBAAgB;gBACnC,MAAM,aAAa,MAAM,uIAAU,CAAC,qBAAqB,CAAC,eAAe;gBACzE,IAAI,cAAc,OAAO,eAAe,UAAU;oBAChD,oBAAoB,UAAU,CAAC,oBAAoB,IAAI;oBACvD,sBAAsB,UAAU,CAAC,uBAAuB,IAAI;oBAC5D,QAAQ,GAAG,CAAC,sBAAsB;gBACpC,OAAO;oBACL,oBAAoB;oBACpB,sBAAsB;gBACxB;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qCAAqC;YACnD,oBAAoB;YACpB,sBAAsB;QACxB;IACF;IAEA,MAAM,yBAAyB;QAC7B,IAAI;YACF,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,mBAAmB,MAAM,mBAAmB,aAAa;gBAChG,QAAQ,IAAI,CAAC,gCAAgC;oBAAE,WAAW;oBAAe,SAAS;gBAAe;gBACjG;YACF;YAEA,MAAM,YAAY,MAAM,uIAAU,CAAC,sBAAsB,CAAC,eAAe,gBAAgB;YACzF,QAAQ,GAAG,CAAC,sCAAsC;YAElD,IAAI,aAAa,UAAU,OAAO,EAAE;gBAClC,IAAI,UAAU,KAAK,EAAE;oBACnB,8CAA8C;oBAC9C,IAAI,YAAY,UAAU,KAAK;oBAE/B,mCAAmC;oBACnC,IAAI,CAAC,UAAU,UAAU,CAAC,UAAU;wBAClC,qDAAqD;wBACrD,IAAI,UAAU,UAAU,CAAC,UAAU,UAAU,UAAU,CAAC,gBAAgB;4BACtE,6DAA6D;4BAC7D,QAAQ,IAAI,CAAC;4BACb,YAAY,CAAC,uBAAuB,EAAE,WAAW;wBACnD,OAAO;4BACL,kDAAkD;4BAClD,YAAY,CAAC,uBAAuB,EAAE,WAAW;wBACnD;oBACF;oBAEA,+BAA+B;oBAC/B,IAAI,CAAC,UAAU,UAAU,CAAC,gBAAgB;wBACxC,QAAQ,KAAK,CAAC,2CAA2C,UAAU,SAAS,CAAC,GAAG,OAAO;wBACvF,qBAAqB;wBACrB;oBACF;oBAEA,qBAAqB;oBACrB,eAAe,UAAU,YAAY,IAAI,MAAM,UAAU;oBAEzD,0CAA0C;oBAC1C,IAAI,UAAU,QAAQ,KAAK,WAAW;wBACpC,gBAAgB,UAAU,QAAQ;wBAClC,gBAAgB,UAAU,QAAQ,GAAG;wBACrC,QAAQ,GAAG,CAAC,CAAC,qCAAqC,EAAE,UAAU,QAAQ,CAAC,SAAS,EAAE,UAAU,YAAY,CAAC,CAAC,CAAC;oBAC7G,OAAO,IAAI,UAAU,SAAS,KAAK,WAAW;wBAC5C,gBAAgB,UAAU,SAAS;wBACnC,gBAAgB,UAAU,SAAS,GAAG;wBACtC,QAAQ,GAAG,CAAC,CAAC,qDAAqD,EAAE,UAAU,SAAS,CAAC,SAAS,EAAE,UAAU,YAAY,CAAC,CAAC,CAAC;oBAC9H,OAAO;wBACL,QAAQ,IAAI,CAAC;wBACb,gBAAgB,CAAC,OAAS,OAAO;wBACjC,gBAAgB,CAAC,OAAS,OAAO;oBACnC;gBACF,OAAO;oBACL,QAAQ,GAAG,CAAC;oBACZ,qBAAqB;oBACrB,oBAAoB;gBACtB;YACF,OAAO;gBACL,QAAQ,GAAG,CAAC,4CAA4C,WAAW;gBACnE,qBAAqB;YACvB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;YAE3C,oBAAoB;YACpB,IAAI,iBAAiB,SAAS,MAAM,OAAO,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,QAAQ;gBAC5E,QAAQ,IAAI,CAAC;gBACb,cAAc;gBACd,IAAI;oBACF,aAAa,UAAU,CAAC;oBACxB,eAAe,KAAK;gBACtB,EAAE,OAAO,cAAc;oBACrB,QAAQ,IAAI,CAAC,4BAA4B;gBAC3C;YACF;YAEA,wBAAwB;YACxB,QAAQ,GAAG,CAAC;YACZ,gBAAgB,CAAC,OAAS,OAAO;YACjC,gBAAgB,CAAC,OAAS,OAAO;YACjC,qBAAqB,KAAK,mBAAmB;QAC/C;IACF;IAEA,MAAM,mBAAmB;QACvB,MAAM;IACR;IAEA,SAAS;IACT,MAAM,oBAAoB,OAAO,aAAa,CAAC,EAAE,aAAa,CAAC;QAC7D,IAAI;YACF,MAAM;QACR,EAAE,OAAO,OAAO;YACd,IAAI,aAAa,YAAY;gBAC3B,QAAQ,GAAG,CAAC,CAAC,sCAAsC,EAAE,aAAa,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;gBACpF,WAAW;oBACT,kBAAkB,aAAa,GAAG;gBACpC,GAAG,OAAO,CAAC,aAAa,CAAC,IAAI,OAAO;YACtC,OAAO;gBACL,QAAQ,KAAK,CAAC;gBACd,oBAAoB;gBACpB,gBAAgB,CAAC,OAAS,OAAO;gBACjC,gBAAgB,CAAC,OAAS,OAAO;YACnC;QACF;IACF;IAEA,MAAM,eAAe;QACnB,IAAI;YACF,IAAI,iBAAiB,eAAe,aAAa;gBAC/C,MAAM,YAAY,MAAM,uIAAU,CAAC,YAAY,CAAC,eAAe;gBAC/D,IAAI,aAAa,UAAU,OAAO,IAAI,UAAU,aAAa,EAAE;oBAC7D,kBAAkB,UAAU,aAAa;oBACzC,gBAAgB,CAAC,OAAS,OAAO;oBACjC,gBAAgB;oBAChB,gBAAgB;oBAChB,eAAe,EAAE;oBACjB,qBAAqB;oBACrB,WAAW;wBACT,MAAM;wBACN,MAAM;oBACR,GAAG;oBACH,QAAQ,GAAG,CAAC,sBAAsB;gBACpC,OAAO;oBACL,QAAQ,GAAG,CAAC;gBACd;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACF;IAEA,MAAM,oBAAoB,IAAA,wLAAW;8DAAC;YACpC,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YACV,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;YAC/C,YAAY,OAAO;sEAAC,CAAC;oBACnB,MAAM,YAAY,QAAQ,IAAI;wFAAC,CAAC,IAAM,EAAE,EAAE,KAAK,WAAW,KAAK;;oBAC/D,IAAI,CAAC,WAAW;oBAChB,IAAI,WAAW,GAAG,UAAU,KAAK;oBACjC,IAAI,SAAS,GAAG,UAAU,KAAK,GAAG;oBAClC,IAAI,SAAS,GAAG;oBAChB,IAAI,UAAU,CAAC,WAAW,CAAC,EAAE,WAAW,CAAC,EAAE,WAAW,KAAK,EAAE,WAAW,MAAM;oBAC9E,IAAI,QAAQ,CAAC,WAAW,CAAC,EAAE,WAAW,CAAC,EAAE,WAAW,KAAK,EAAE,WAAW,MAAM;gBAC9E;;YACA,IAAI,YAAY;gBACd,MAAM,eAAe,QAAQ,IAAI;0EAAC,CAAC,IAAM,EAAE,EAAE,KAAK;4EAAkB,OAAO,CAAC,EAAE,IAAI;oBAChF,IAAI;oBACJ,MAAM;oBACN,OAAO;gBACT;gBACA,IAAI,WAAW,GAAG,aAAa,KAAK;gBACpC,IAAI,SAAS,GAAG,aAAa,KAAK,GAAG;gBACrC,IAAI,SAAS,GAAG;gBAChB,IAAI,WAAW,CAAC;oBAAC;oBAAG;iBAAE;gBACtB,IAAI,UAAU,CAAC,WAAW,CAAC,EAAE,WAAW,CAAC,EAAE,WAAW,KAAK,EAAE,WAAW,MAAM;gBAC9E,IAAI,QAAQ,CAAC,WAAW,CAAC,EAAE,WAAW,CAAC,EAAE,WAAW,KAAK,EAAE,WAAW,MAAM;gBAC5E,IAAI,WAAW,KAAK,GAAG,MAAM,WAAW,MAAM,GAAG,IAAI;oBACnD,IAAI,SAAS,GAAG,aAAa,KAAK;oBAClC,IAAI,IAAI,GAAG;oBACX,IAAI,QAAQ,CAAC,aAAa,IAAI,EAAE,WAAW,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG;gBACnE;gBACA,IAAI,WAAW,CAAC,EAAE;YACpB;QACF;6DAAG;QAAC;QAAa;QAAY;QAAe;KAAQ;IAEpD,IAAA,sLAAS;yCAAC;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YACV,MAAM;kEAAmB;oBACvB,IAAI,aAAa,OAAO,EAAE;wBACxB,MAAM,OAAO,aAAa,OAAO,CAAC,qBAAqB;wBACvD,OAAO,KAAK,GAAG,KAAK,KAAK;wBACzB,OAAO,MAAM,GAAG,KAAK,MAAM;wBAC3B,OAAO,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,KAAK,CAAC,EAAE,CAAC;wBACtC,OAAO,KAAK,CAAC,MAAM,GAAG,GAAG,KAAK,MAAM,CAAC,EAAE,CAAC;wBACxC;oBACF;gBACF;;YACA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAClC;iDAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;wCAAG;QAAC;KAAkB;IAEtB,IAAA,sLAAS;yCAAC;YACR;QACF;wCAAG;QAAC;QAAmB;KAAkB;IAEzC,IAAA,sLAAS;yCAAC;YACR,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ,MAAM,GAAG;YAC1D,IAAI,YAAY,YAAY;gBAC1B,aAAa;YACf;QACF;wCAAG;QAAC;QAAS;KAAU;IAEvB,IAAI,CAAC,gBAAgB;QACnB,qBACE,yMAAC;YAAI,WAAU;sBACb,cAAA,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,yMAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAClC,yMAAC;wBAAI,WAAU;kCACb,cAAA,yMAAC;4BAAE,WAAU;;8CACX,yMAAC;8CAAO;;;;;;8CAAoB,yMAAC;;;;;gCAAI;gCACpB;8CAAc,yMAAC;;;;;gCAAI;gCACb;8CAAe,yMAAC;;;;;gCAAI;gCACjC,uCAAgC,OAAO,QAAQ,CAAC,IAAI,GAAG;;;;;;;;;;;;kCAGjE,yMAAC;wBAAI,WAAU;;0CACb,yMAAC,sLAAI;gCAAC,MAAM,CAAC,SAAS,EAAE,cAAc,OAAO,CAAC;gCAAE,WAAU;0CAAgE;;;;;;0CAG1H,yMAAC;gCAAO,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;gCAAI,WAAU;0CAAgE;;;;;;;;;;;;;;;;;;;;;;;IAOrI;IAEA,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,kBAAkB,OAAO,CAAC,EAAE,IAAI;QAChF,IAAI;QACJ,MAAM;QACN,OAAO;IACT;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,iBAAiB,OAAO;QAC5B,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,MAAM,OAAO,OAAO,qBAAqB;QACzC,MAAM,IAAI,CAAC,EAAE,OAAO,GAAG,KAAK,IAAI,IAAI;QACpC,MAAM,IAAI,CAAC,EAAE,OAAO,GAAG,KAAK,GAAG,IAAI;QACnC,aAAa;QACb,aAAa;YAAE;YAAG;QAAE;QACpB,cAAc;YAAE;YAAG;YAAG,OAAO;YAAG,QAAQ;QAAE;QAC1C,EAAE,cAAc;QAChB,EAAE,eAAe;IACnB;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,aAAa,iBAAiB,OAAO;QAC1C,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,MAAM,OAAO,OAAO,qBAAqB;QACzC,MAAM,IAAI,CAAC,EAAE,OAAO,GAAG,KAAK,IAAI,IAAI;QACpC,MAAM,IAAI,CAAC,EAAE,OAAO,GAAG,KAAK,GAAG,IAAI;QACnC,MAAM,QAAQ,IAAI,UAAU,CAAC;QAC7B,MAAM,SAAS,IAAI,UAAU,CAAC;QAC9B,cAAc;YACZ,GAAG,KAAK,GAAG,CAAC,UAAU,CAAC,EAAE;YACzB,GAAG,KAAK,GAAG,CAAC,UAAU,CAAC,EAAE;YACzB,OAAO,KAAK,GAAG,CAAC;YAChB,QAAQ,KAAK,GAAG,CAAC;QACnB;QACA,EAAE,cAAc;QAChB,EAAE,eAAe;IACnB;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,CAAC,aAAa,CAAC,cAAc,iBAAiB,OAAO;QACzD,IAAI,WAAW,KAAK,GAAG,MAAM,WAAW,MAAM,GAAG,IAAI;YACnD,MAAM,gBAA4B;gBAChC,IAAI,CAAC,WAAW,EAAE,YAAY,MAAM,GAAG,EAAE,CAAC,EAAE,qBAAqB,OAAO,CAAC,WAAW,KAAK;gBACzF,OAAO;gBACP,GAAG,WAAW,CAAC;gBACf,GAAG,WAAW,CAAC;gBACf,OAAO,WAAW,KAAK;gBACvB,QAAQ,WAAW,MAAM;gBACzB,OAAO,aAAa,KAAK;YAC3B;YACA,eAAe,CAAC,OAAS;uBAAI;oBAAM;iBAAc;QACnD;QACA,aAAa;QACb,cAAc;QACd,EAAE,cAAc;QAChB,EAAE,eAAe;IACnB;IAEA,MAAM,aAAa,CAAC;QAClB,QAAQ;QACR,cAAc,UAAU;IAC1B;IAEA,MAAM,kBAAkB;QACtB,IAAI,eAAe,cAAc,GAAG;YAClC,MAAM;YACN,eAAe,EAAE;YACjB,MAAM;YACN,gBAAgB,CAAC,OAAS,OAAO;YACjC,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,eAAe,EAAE,CAAC,EAAE,aAAa;QACnF,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,MAAM;QACR;IACF;IAEA,MAAM,kBAAkB;QACtB,QAAQ,GAAG,CAAC;IACd;IAEA,MAAM,iBAAiB;QACrB,IAAI,YAAY,MAAM,KAAK,GAAG;YAC5B,QAAQ,GAAG,CAAC;YACZ;QACF;QACA,gBAAgB;QAChB,cAAc;QACd,IAAI;YACF,MAAM,iBAAiB;gBACrB,YAAY;gBACZ,UAAU;gBACV,WAAW;gBACX,QAAQ,YAAY,GAAG,CAAC,CAAA,MAAO,CAAC;wBAC9B,YAAY,IAAI,KAAK;wBACrB,GAAG,OAAO,IAAI,CAAC;wBACf,GAAG,OAAO,IAAI,CAAC;wBACf,OAAO,OAAO,IAAI,KAAK;wBACvB,QAAQ,OAAO,IAAI,MAAM;oBAC3B,CAAC;YACH;YACA,MAAM,SAAS,MAAM,uIAAU,CAAC,cAAc,CAAC;YAC/C,IAAI,OAAO,OAAO,EAAE;gBAClB,iBAAiB,OAAO,OAAO,IAAI;gBACnC,cAAc;gBACd,QAAQ,GAAG,CAAC,uCAAuC;oBAAE,SAAS,OAAO,OAAO;oBAAE,WAAW,YAAY,MAAM;gBAAC;YAC9G,OAAO;gBACL,cAAc;gBACd,mBAAmB;YACrB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;YAChD,cAAc;YACd,MAAM,iBAAiB;gBACrB,YAAY;gBACZ,UAAU;gBACV,WAAW;gBACX,QAAQ,YAAY,GAAG,CAAC,CAAA,MAAO,CAAC;wBAC9B,YAAY,IAAI,KAAK;wBACrB,GAAG,OAAO,IAAI,CAAC;wBACf,GAAG,OAAO,IAAI,CAAC;wBACf,OAAO,OAAO,IAAI,KAAK;wBACvB,QAAQ,OAAO,IAAI,MAAM;oBAC3B,CAAC;YACH;YACA,mBAAmB;QACrB,SAAU;YACR,gBAAgB;YAChB,WAAW,IAAM,cAAc,SAAS;QAC1C;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,IAAI;YACF,MAAM,MAAM,CAAC,kBAAkB,EAAE,eAAe,UAAU,CAAC,CAAC,EAAE,eAAe,QAAQ,CAAC,CAAC,EAAE,eAAe,SAAS,EAAE;YACnH,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;gBACvC,GAAG,cAAc;gBACjB,SAAS;gBACT,UAAU;YACZ;YACA,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;QACpD;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,iBAAiB,CAAC,gBAAgB;YACrC,QAAQ,IAAI,CAAC;YACb,MAAM;YACN;QACF;QACA,IAAI;YACF,MAAM,iBAAiB;gBACrB,YAAY;gBACZ,UAAU;gBACV,WAAW;gBACX,QAAQ,YAAY,GAAG,CAAC,CAAA,MAAO,CAAC;wBAC9B,YAAY,IAAI,KAAK;wBACrB,GAAG,OAAO,IAAI,CAAC;wBACf,GAAG,OAAO,IAAI,CAAC;wBACf,OAAO,OAAO,IAAI,KAAK;wBACvB,QAAQ,OAAO,IAAI,MAAM;oBAC3B,CAAC;YACH;YACA,MAAM,SAAS,MAAM,uIAAU,CAAC,cAAc,CAAC;YAC/C,IAAI,OAAO,OAAO,EAAE;gBAClB,QAAQ,GAAG,CAAC,kCAAkC;oBAAE,SAAS,OAAO,OAAO;oBAAE,WAAW,YAAY,MAAM;gBAAC;gBACvG,MAAM,CAAC,iCAAiC,EAAE,YAAY,MAAM,CAAC,gBAAgB,CAAC;YAChF,OAAO;gBACL,mBAAmB;gBACnB,MAAM,CAAC,4BAA4B,EAAE,OAAO,OAAO,IAAI,gBAAgB,yBAAyB,CAAC;YACnG;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,MAAM,iBAAiB;gBACrB,YAAY;gBACZ,UAAU;gBACV,WAAW;gBACX,QAAQ,YAAY,GAAG,CAAC,CAAA,MAAO,CAAC;wBAC9B,YAAY,IAAI,KAAK;wBACrB,GAAG,OAAO,IAAI,CAAC;wBACf,GAAG,OAAO,IAAI,CAAC;wBACf,OAAO,OAAO,IAAI,KAAK;wBACvB,QAAQ,OAAO,IAAI,MAAM;oBAC3B,CAAC;YACH;YACA,mBAAmB;YACnB,MAAM,CAAC,0BAA0B,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,gBAAgB,yBAAyB,CAAC;QACxH;IACF;IAEA,MAAM,aAAa,CAAC,QAAkB,2BAA2B,IAAI,CAAC;IAEtE,MAAM,sBAAsB,CAAC;QAC3B,MAAM,UAAU;YACd;YAAW;YAAW;YAAW;YAAW;YAC5C;YAAW;YAAW;YAAW;YAAW;SAC7C;QACD,KAAK,MAAM,KAAK,QAAS;YACvB,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,WAAW,KAAK,OAAO;QACzC;QACA,MAAM,OAAO,KAAK,IAAI;QACtB,MAAM,MAAM,AAAC,OAAO,UAAW;QAC/B,OAAO,CAAC,IAAI,EAAE,KAAK,KAAK,CAAC,KAAK,WAAW,CAAC;IAC5C;IAEA,MAAM,iBAAiB;QACrB,MAAM,QAAQ,aAAa,IAAI;QAC/B,IAAI,CAAC,OAAO;QACZ,MAAM,UAAU,MAAM,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,IAAI,MAAM,CAAC;QAC7D,KAAK,MAAM,SAAS,QAAS;YAC3B,MAAM,CAAC,aAAa,aAAa,GAAG,MAAM,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;YACtE,MAAM,WAAW,eAAe;YAChC,IAAI,CAAC,UAAU;YACf,IAAI,cAAc;YAClB,IAAI,gBAAgB,WAAW,eAAe;gBAC5C,cAAc,aAAa,WAAW;YACxC;YACA,MAAM,cAAc,SAAS,WAAW,GAAG,OAAO,CAAC,QAAQ;YAC3D,IAAI,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,cAAc;gBAC7C,QAAQ,GAAG,CAAC,CAAC,OAAO,EAAE,SAAS,gBAAgB,CAAC;gBAChD;YACF;YACA,IAAI;gBACF,MAAM,SAAS,MAAM,uIAAU,CAAC,QAAQ,CAAC,eAAe,UAAU;gBAClE,IAAI,UAAU,OAAO,OAAO,EAAE;oBAC5B,MAAM,cAAc,MAAM,uIAAU,CAAC,UAAU,CAAC;oBAChD,WAAW;oBACX,iBAAiB;oBACjB,QAAQ,GAAG,CAAC;gBACd,OAAO;oBACL,MAAM,CAAC,qBAAqB,EAAE,QAAQ,WAAW,iBAAiB;gBACpE;YACF,EAAE,OAAO,OAAO;gBACd,MAAM,CAAC,oBAAoB,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO,QAAQ;YACvF;QACF;QACA,gBAAgB;IAClB;IAEA,MAAM,oBAAoB,OAAO;QAC/B,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACjD,IAAI,CAAC,eAAe;QACpB,IAAI;YACF,MAAM,SAAS,MAAM,uIAAU,CAAC,WAAW,CAAC,eAAe,cAAc,IAAI;YAC7E,IAAI,UAAU,OAAO,OAAO,EAAE;gBAC5B,MAAM,cAAc,MAAM,uIAAU,CAAC,UAAU,CAAC;gBAChD,WAAW;gBACX,IAAI,kBAAkB,SAAS;oBAC7B,MAAM,YAAY,YAAY,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;oBACrD,iBAAiB,SAAS,CAAC,EAAE,EAAE,MAAM;gBACvC;gBACA,QAAQ,GAAG,CAAC;YACd,OAAO;gBACL,MAAM,CAAC,QAAQ,EAAE,QAAQ,WAAW,iBAAiB;YACvD;QACF,EAAE,OAAO,OAAO;YACd,MAAM,CAAC,WAAW,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO,QAAQ;QAC9E;IACF;IAEA,MAAM,yBAAyB,OAAO;QACpC,IAAI;YACF,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;YACzD,MAAM;YACN,QAAQ,GAAG,CAAC,CAAC,wBAAwB,EAAE,aAAa,qBAAqB,CAAC;QAC5E,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2CAA2C;QAC3D;IACF;IAEA,MAAM,cAAc,gBAAgB,cAAc;IAClD,MAAM,cAAc,gBAAgB;IAEpC,qBACE,yMAAC;QAAI,WAAU;;0BACb,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;gCAAI,WAAU;;kDACb,yMAAC;wCAAI,WAAU;;0DACb,yMAAC;gDAAI,WAAU;;kEACb,yMAAC,oJAAM;wDACL,SAAQ;wDACR,MAAK;wDACL,SAAS;wDACT,UAAU;wDACV,WAAU;;0EAEV,yMAAC,kPAAW;gEAAC,WAAU;;;;;;4DAAiB;;;;;;;kEAG1C,yMAAC,oJAAM;wDACL,SAAQ;wDACR,MAAK;wDACL,SAAS;wDACT,UAAU,eAAe;wDACzB,WAAU;kEAET,6BACC;;8EACE,yMAAC;oEAAI,WAAU;;;;;;gEAA0E;;yFAI3F;;gEAAE;8EAEA,yMAAC,qPAAY;oEAAC,WAAU;;;;;;;;;;;;;;;;;;;0DAKhC,yMAAC;gDAAK,WAAU;;oDAA8B;oDACrC;oDAAa;oDAAK;;;;;;;0DAE3B,yMAAC;gDAAI,WAAU;;oDAA6B;oDACrB;oDAAa;oDAAW;;;;;;;;;;;;;kDAGjD,yMAAC;wCAAI,WAAU;;;;;;kDACf,yMAAC;wCAAI,WAAU;;0DACb,yMAAC;gDAAK,WAAU;;oDAA8B;oDACrC;oDAAa;oDAAK;;;;;;;0DAE3B,yMAAC;gDAAI,WAAU;;kEACb,yMAAC,oJAAM;wDACL,MAAK;wDACL,SAAS;4DACP,IAAI,eAAe,GAAG;gEACpB,gBAAgB,CAAC,OAAS,OAAO;gEACjC,gBAAgB;gEAChB,gBAAgB;gEAChB,eAAe,EAAE;gEACjB,qBAAqB;gEACrB,WAAW;oEACT,MAAM;oEACN,MAAM;gEACR,GAAG;4DACL;wDACF;wDACA,UAAU,gBAAgB;wDAC1B,WAAU;;0EAEV,yMAAC,kPAAW;gEAAC,WAAU;;;;;;4DAAiB;;;;;;;kEAG1C,yMAAC,oJAAM;wDACL,MAAK;wDACL,SAAS;wDACT,UAAU;wDACV,WAAU;;4DACX;0EAEC,yMAAC,qPAAY;gEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAKhC,yMAAC;gCAAI,WAAU;0CACb,cAAA,yMAAC,oJAAM;oCACL,SAAS;oCACT,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,OAAM;;sDAEN,yMAAC,yNAAI;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;kCAKvC,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;gCAAI,WAAU;;kDACb,yMAAC;wCAAI,WAAU;;0DACb,yMAAC;gDAAK,WAAU;0DAA8B;;;;;;0DAC9C,yMAAC;gDAAI,WAAU;;kEACb,yMAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,yMAAC;wDAAK,WAAW,CAAC,0BAA0B,EAC1C,qBAAqB,oBAAoB,8BACzC,qBAAqB,gBAAgB,kCACrC,qBAAqB,cAAc,gCACnC,6BACA;kEACC;;;;;;kEAEH,yMAAC;wDAAK,WAAU;;4DAAgB;4DAAQ;;;;;;;oDACvC,eAAe,yBACd,yMAAC;wDAAK,WAAU;;0EACd,yMAAC;gEAAI,WAAU;;;;;;4DAA0E;;;;;;+DAGzF,eAAe,wBACjB,yMAAC;wDAAK,WAAU;;0EACd,yMAAC;gEAAI,WAAU;;;;;;4DAA+C;4DACzD,gBAAgB,IAAI,KAAK,eAAe,kBAAkB,KAAK;;;;;;+DAEpE,eAAe,wBACjB,yMAAC;wDAAK,WAAU;;0EACd,yMAAC;gEAAI,WAAU;;;;;;4DAA6C;;;;;;6EAI9D,yMAAC;wDAAK,WAAU;kEAAyB;;;;;;;;;;;;0DAG7C,yMAAC;gDAAI,WAAU;;kEACb,yMAAC,oJAAM;wDACL,SAAS,iBAAiB,WAAW,YAAY;wDACjD,MAAK;wDACL,SAAS,IAAM,gBAAgB;wDAC/B,WAAU;;0EAEV,yMAAC,qPAAY;gEAAC,WAAU;;;;;;4DAAiB;;;;;;;kEAG3C,yMAAC,oJAAM;wDACL,SAAS,iBAAiB,QAAQ,YAAY;wDAC9C,MAAK;wDACL,SAAS,IAAM,gBAAgB;wDAC/B,WAAU;;0EAEV,yMAAC,+NAAM;gEAAC,WAAU;;;;;;4DAAiB;;;;;;;;;;;;;;;;;;;kDAKzC,yMAAC;wCAAI,WAAU;;0DACb,yMAAC;gDAAK,WAAU;0DAAwB;;;;;;0DACxC,yMAAC,oJAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,SAAS,IAAM,WAAW,KAAK,GAAG,CAAC,IAAI,OAAO;0DAE9C,cAAA,yMAAC,sOAAO;oDAAC,WAAU;;;;;;;;;;;0DAErB,yMAAC;gDAAK,WAAU;;oDAAgD;oDAAK;;;;;;;0DACrE,yMAAC,oJAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,SAAS,IAAM,WAAW,KAAK,GAAG,CAAC,KAAK,OAAO;0DAE/C,cAAA,yMAAC,mOAAM;oDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0CAIxB,yMAAC;gCAAI,KAAK;gCAAc,WAAU;;oCAC/B,kCACC,yMAAC;wCACC,KAAK;wCACL,KAAK,CAAC,MAAM,EAAE,cAAc;wCAC5B,WAAU;wCACV,OAAO;4CAAE,WAAW,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;wCAAC;;;;;6DAG7C,yMAAC;wCAAI,WAAU;kDACb,cAAA,yMAAC;4CAAI,WAAU;;8DACb,yMAAC;oDAAI,WAAU;;;;;;8DACf,yMAAC;oDAAE,WAAU;8DAAgB;;;;;;;;;;;;;;;;;kDAInC,yMAAC;wCACC,KAAK;wCACL,WAAU;wCACV,OAAO;4CAAE,WAAW,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;4CAAE,QAAQ,iBAAiB,QAAQ,cAAc;wCAAU;wCACrG,aAAa;wCACb,aAAa;wCACb,WAAW;wCACX,eAAe,CAAC,IAAM,EAAE,cAAc;;;;;;;;;;;;;;;;;;;;;;;;0BAK9C,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,yMAAC;gCAAI,WAAU;;kDACb,yMAAC,kJAAK;wCACJ,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;;;;;;kDAEjD,yMAAC,oJAAM;wCAAC,SAAS;wCAAgB,WAAU;kDAA2C;;;;;;;;;;;;0CAIxF,yMAAC;gCAAI,WAAU;0CACZ,CAAC;oCACA,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ,MAAM,GAAG;oCAC1D,MAAM,WAAW,CAAC,YAAY,CAAC,IAAI;oCACnC,MAAM,YAAY,QAAQ,KAAK,CAAC,UAAU,WAAW;oCACrD,OAAO;gCACT,CAAC,IAAI,GAAG,CAAC,CAAC,oBACR,yMAAC;wCAEC,WAAW,CAAC,mEAAmE,EAC7E,kBAAkB,IAAI,EAAE,GAAG,uCAAuC,oBAClE;;0DAEF,yMAAC;gDAAI,SAAS,IAAM,iBAAiB,IAAI,EAAE;gDAAG,WAAU;;kEACtD,yMAAC;wDAAI,WAAU;wDAA4B,OAAO;4DAAE,iBAAiB,IAAI,KAAK;wDAAC;;;;;;kEAC/E,yMAAC;wDAAK,WAAW,CAAC,QAAQ,EAAE,kBAAkB,IAAI,EAAE,GAAG,kBAAkB,IAAI;kEAC1E,IAAI,IAAI;;;;;;;;;;;;0DAGb,yMAAC,oJAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,SAAS,IAAM,kBAAkB,IAAI,EAAE;gDACvC,WAAU;0DAEV,cAAA,yMAAC,mOAAM;oDAAC,WAAU;;;;;;;;;;;;uCAjBf,IAAI,EAAE;;;;;;;;;;4BAsBhB,QAAQ,MAAM,GAAG,kCAChB,yMAAC;gCAAI,WAAU;;kDACb,yMAAC;wCAAK,WAAU;;4CAAwB;4CAChC;4CAAU;4CAAK,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ,MAAM,GAAG;;;;;;;kDAE9D,yMAAC;wCAAI,WAAU;;0DACb,yMAAC,oJAAM;gDACL,MAAK;gDACL,SAAS,IAAM,aAAa,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI;gDACnD,UAAU,aAAa;gDACvB,WAAU;0DACX;;;;;;0DAGD,yMAAC,oJAAM;gDACL,MAAK;gDACL,SAAS,IAAM,aAAa,CAAC,IAAM,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ,MAAM,GAAG,oBAAoB,IAAI;gDAC3G,UAAU,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ,MAAM,GAAG;gDAC9D,WAAU;0DACX;;;;;;;;;;;;;;;;;;;;;;;;kCAOT,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,yMAAC;gCAAI,WAAU;;oCACZ,YAAY,GAAG,CAAC,CAAC;wCAChB,MAAM,YAAY,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,WAAW,KAAK;wCAC/D,qBACE,yMAAC;4CAAwB,WAAU;;8DACjC,yMAAC;oDAAI,WAAU;;sEACb,yMAAC;4DAAI,WAAU;4DAA4B,OAAO;gEAAE,iBAAiB,WAAW;4DAAM;;;;;;sEACtF,yMAAC;4DAAK,WAAU;sEAAW,WAAW,KAAK;;;;;;;;;;;;8DAE7C,yMAAC,oJAAM;oDACL,SAAQ;oDACR,MAAK;oDACL,SAAS,IAAM,uBAAuB,WAAW,EAAE;oDACnD,WAAU;8DAEV,cAAA,yMAAC,mOAAM;wDAAC,WAAU;;;;;;;;;;;;2CAXZ,WAAW,EAAE;;;;;oCAe3B;oCACC,YAAY,MAAM,KAAK,mBACtB,yMAAC;wCAAE,WAAU;kDAAyC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASpE;GA97BS;;QACQ,8JAAS;;;KADjB;AAg8BT,MAAM,eAAe,IAAA,yLAAO,QAAC,IAAM,QAAQ,OAAO,CAAC,sBAAsB;IACvE,KAAK;IACL,SAAS,kBACP,yMAAC;YAAI,WAAU;sBACb,cAAA,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;wBAAI,WAAU;;;;;;kCACf,yMAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;AAIrC;;uCAEe","debugId":null}}]
}